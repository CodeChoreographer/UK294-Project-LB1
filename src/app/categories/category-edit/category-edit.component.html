<div class="category-edit-container">
  <h2>Kategorie bearbeiten</h2>

  @if (errorMessage) {
    <div class="error">{{ errorMessage }}</div>
  }

  @if (categoryData) {
    <h3>Name: {{ categoryData.name }}</h3>
    <p>Status: {{ categoryData.active ? 'Aktiv' : 'Inaktiv' }}</p>

    <h3>Produkte in dieser Kategorie</h3>
    <ul>
      @for (product of categoryData.products; track product.id) {
        <li>
          <strong>{{ product.name }}</strong>
          (SKU: {{ product.sku }}, Preis: {{ product.price | currency: 'CHF ' }}, Lagerbestand: {{ product.stock }})
        </li>
      }
    </ul>

    @if (isAdmin) {
      <h3>Kategorie bearbeiten</h3>
      <form (ngSubmit)="onSave()">
        <label for="name">Name der Kategorie</label>
        <input
          type="text"
          id="name"
          [(ngModel)]="categoryData.name"
          name="name"
          required
        />

        <label for="active">Aktiv?</label>
        <input
          type="checkbox"
          id="active"
          [(ngModel)]="categoryData.active"
          name="active"
        />

        <button type="submit">Änderungen speichern</button>
      </form>

      <button (click)="onDelete()">Kategorie löschen</button>
    }
  }
</div>
