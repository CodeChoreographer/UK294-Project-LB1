<div class="category-edit-container">
  <h2>Kategorie bearbeiten</h2>

  @if (errorMessage) {
    <div class="error">{{ errorMessage }}</div>
  }

  @if (categoryData) {
    <form (ngSubmit)="onSave()">
      <label for="name">Name der Kategorie</label>
      <input type="text" id="name" [(ngModel)]="categoryData.name" name="name" required />

      <label>Status</label>
      <div class="mat-slide-toggle-container">
        <label class="toggle-label">Aktiv?</label>
        <mat-slide-toggle id="active"
                          [(ngModel)]="categoryData.active"
                          name="active">

        </mat-slide-toggle>
      </div>

      <label>Produkte in dieser Kategorie:</label>
      <ul>
        @for (product of categoryData.products; track product.id) {
          <li>{{ product.name }} (SKU: {{ product.sku }}, Preis: {{ product.price | currency: 'CHF ' }}, Lager: {{ product.stock }})</li>
        }
      </ul>

      <div class="button-group">
        <button type="submit">Änderungen speichern</button>
        <button type="button" (click)="onDelete()">Kategorie löschen</button>
      </div>
    </form>
  } @else {
    <p>Keine Kategorie-Daten verfügbar.</p>
  }
</div>
