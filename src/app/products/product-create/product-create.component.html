<div class="product-create-container">
  <h2>Produkt erstellen</h2>

  @if (errorMessage) {
    <div class="error">{{ errorMessage }}</div>
  }

  <form (ngSubmit)="onSubmit()" #productForm="ngForm" class="form-container">
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>SKU</mat-label>
      <input matInput type="text" id="sku" name="sku" [(ngModel)]="productData.sku" required />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Name</mat-label>
      <input matInput type="text" id="name" name="name" [(ngModel)]="productData.name" required />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Bild-URL</mat-label>
      <input matInput type="text" id="image" name="image" [(ngModel)]="productData.image" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Beschreibung</mat-label>
      <textarea matInput id="description" name="description" [(ngModel)]="productData.description" required></textarea>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Preis</mat-label>
      <input matInput type="number" id="price" name="price" [(ngModel)]="productData.price" required />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Lagerbestand</mat-label>
      <input matInput type="number" id="stock" name="stock" [(ngModel)]="productData.stock" required />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Kategorie</mat-label>
      <mat-select [(ngModel)]="productData.categoryId" name="categoryId" required>
        @for (category of categories; track category.id) {
          <mat-option [value]="category.id">{{ category.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <div class="mat-slide-toggle-container">
      <label class="toggle-label">Aktiv?</label>
      <mat-slide-toggle [(ngModel)]="productData.active" name="active"></mat-slide-toggle>
    </div>

    <button mat-raised-button color="primary" type="submit" [disabled]="!productForm.valid"
      matTooltip="Bitte füllen Sie alle Felder aus"
      [matTooltipDisabled]="productForm.valid"
      >
      Produkt erstellen
    </button>
  </form>
  <button mat-raised-button (click)="goBackToProducts()" class="back-button">Zurück zur Produktübersicht</button>
</div>
